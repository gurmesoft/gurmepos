import{s as y,o as l,c as i,a as e,g as v,u as o,T as I,f as D,t as u,F as k,q as C,D as M,l as F,an as H,ac as L,d as N,ao as Q,w as g,m as V,ap as q,p as E,b as T,I as G,aq as R,a2 as z,ar as J}from"../vendor/main-0b129abe.js";import{u as m}from"../CheckoutStore/main-92f97e4a.js";import{_ as K}from"../_plugin-vue_export-helper/main-c27b6911.js";import{u as O,p as j}from"../ajax/main-ce60c976.js";const P={class:"bg-yellow-100 text-yellow-700 p-3 flex flex-col rounded gap-2"},W={class:"flex items-center gap-2 text-lg font-semibold"},X={key:0},Y=e("th",null,null,-1),Z={class:"hidden md:table-cell"},ee=e("th",{class:"hidden md:table-cell"}," Cvc ",-1),te=e("th",{class:"hidden md:table-cell"}," 3ds ",-1),se=e("th",null,null,-1),re=["src"],ne={class:"hidden md:table-cell"},ae={class:"hidden md:table-cell"},oe={class:"hidden md:table-cell"},Qe={__name:"TestMode",setup(c){const t=m(),{card:n}=y(t),{assetsUrl:a,gateway:r}=t,s=d=>{n.value.bin=d.bin,n.value.expiry_month=d.expiry_month,n.value.expiry_year=d.expiry_year,n.value.expiry=`${d.expiry_month} / ${d.expiry_year}`,n.value.cvv=d.cvv};return(d,x)=>(l(),i("div",P,[e("div",W,[v(o(I),{class:"w-6"}),D(u(d.$t("test_mode_title")),1)]),e("div",null,u(d.$t("test_mode_checkout_desc")),1),o(r).test_cards.length>0?(l(),i("table",X,[e("tr",null,[Y,e("th",null,u(d.$t("card_bin")),1),e("th",Z,u(d.$t("month_year")),1),ee,te,se]),e("tbody",null,[(l(!0),i(k,null,C(o(r).test_cards,(_,$)=>(l(),i("tr",{key:$,class:"!border-b !border-yellow-700"},[e("td",null,[e("img",{class:"w-8",src:`${o(a)}/images/card/${_.brand}.svg`},null,8,re)]),e("td",null,u(_.bin),1),e("td",ne,u(_.expiry_month)+"/"+u(_.expiry_year),1),e("td",ae,u(_.cvv),1),e("td",oe,u(_.secure),1),e("td",null,[v(o(M),{class:"w-6 cursor-pointer",onClick:h=>s(_)},null,8,["onClick"])])]))),128))])])):F("",!0)]))}},de={class:"flex w-full"},le={class:"inline-flex relative px-3 items-center text-sm border border-r-0 border-gray-300 rounded-l !bg-white"},ce=["placeholder"],Ge={__name:"HolderName",setup(c){return(t,n)=>(l(),i("div",de,[e("span",le,[v(o(H),{class:"w-6 h-6","aria-hidden":"true"})]),e("input",{id:"gpos-card-holder-name",type:"text",class:"!rounded-r !border-y !border-r !border-l-0 !w-full !border-gray-300 !bg-white !m-0 !p-3",placeholder:t.$t("name_on_card")},null,8,ce)]))}};const ie={},ue={class:"dot-spinner mx-3"},pe=L('<div class="dot-spinner__dot" data-v-739471c9></div><div class="dot-spinner__dot" data-v-739471c9></div><div class="dot-spinner__dot" data-v-739471c9></div><div class="dot-spinner__dot" data-v-739471c9></div><div class="dot-spinner__dot" data-v-739471c9></div><div class="dot-spinner__dot" data-v-739471c9></div><div class="dot-spinner__dot" data-v-739471c9></div><div class="dot-spinner__dot" data-v-739471c9></div>',8),_e=[pe];function me(c,t){return l(),i("div",ue,_e)}const he=K(ie,[["render",me],["__scopeId","data-v-739471c9"]]),ye={class:"flex w-full"},ve={class:"inline-flex relative items-center text-sm border border-r-0 border-gray-300 rounded-l !bg-white w-12"},be=["src"],Re={__name:"BinNumber",setup(c){const{loading:t}=y(O()),n=m(),{card:a}=y(n),{assetsUrl:r}=n;return(s,d)=>(l(),i("div",ye,[e("span",ve,[o(t)?(l(),N(he,{key:0})):["visa","mastercard"].includes(o(a).brand)?(l(),i("img",{key:1,class:"w-12 h-12 !m-0",src:`${o(r)}/images/card/${o(a).brand}.svg`},null,8,be)):(l(),N(o(Q),{key:2,class:"w-6 h-6 mx-3","aria-hidden":"true"}))]),g(e("input",{id:"gpos-card-bin","onUpdate:modelValue":d[0]||(d[0]=x=>o(a).bin=x),class:"!rounded-r !border-y !border-r !border-l-0 !w-full !border-gray-300 !bg-white !m-0 !p-3",placeholder:"•••• •••• •••• ••••",inputmode:"numeric",type:"tel",autocomplete:"cc-number"},null,512),[[V,o(a).bin]])]))}},ge={class:"flex w-full"},xe={class:"inline-flex items-center px-3 text-sm border border-r-0 border-gray-300 rounded-l !bg-white"},fe={value:""},$e=["value","textContent"],we={value:""},ke=["value","textContent"],Ce={__name:"Select",setup(c){const t=m(),{card:n}=y(t);return(a,r)=>(l(),i("div",ge,[e("span",xe,[v(o(q),{class:"w-6 h-6","aria-hidden":"true"})]),g(e("select",{id:"gpos-card-expiry-month","onUpdate:modelValue":r[0]||(r[0]=s=>o(n).expiry_month=s),autocomplete:"cc-exp-month",class:"border !border-x-0 !border-gray-300 text-gray-900 text-sm !rounded-none w-2/5 !bg-white focus:ring-0 focus:ring-offset-0 !p-3"},[e("option",fe,u(a.$t("month")),1),(l(),i(k,null,C(["01","02","03","04","05","06","07","08","09","10","11","12"],s=>e("option",{key:s,value:s,textContent:u(s)},null,8,$e)),64))],512),[[E,o(n).expiry_month]]),g(e("select",{id:"gpos-card-expiry-year","onUpdate:modelValue":r[1]||(r[1]=s=>o(n).expiry_year=s),autocomplete:"cc-exp-year",class:"border !border-l-0 !border-gray-300 text-gray-900 text-sm !rounded-r !rounded-l-none w-3/5 !bg-white focus:ring-0 focus:ring-offset-0 !p-3"},[e("option",we,u(a.$t("year")),1),(l(),i(k,null,C(["2023","2024","2025","2026","2027","2028","2029","2030","2031","2032","2033"],s=>e("option",{key:s,value:s,textContent:u(s)},null,8,ke)),64))],512),[[E,o(n).expiry_year]])]))}},Ve={class:"flex w-full"},Ue={class:"inline-flex items-center px-3 text-sm border border-r-0 border-gray-300 rounded-l !bg-white"},Se=["placeholder"],Ne=["value"],Ae=["value"],Be={__name:"Text",setup(c){const{card:t}=y(m()),n=T(()=>{var r,s;return(s=(r=t.value.expiry)==null?void 0:r.replaceAll(/\s/g,""))==null?void 0:s.split("/")[0]}),a=T(()=>{var r,s,d;return(d=(s=(r=t.value.expiry)==null?void 0:r.replaceAll(/\s/g,""))==null?void 0:s.split("/")[1])==null?void 0:d.slice(-2)});return(r,s)=>(l(),i("div",Ve,[e("span",Ue,[v(o(q),{class:"w-6 h-6","aria-hidden":"true"})]),g(e("input",{id:"gpos-card-expiry","onUpdate:modelValue":s[0]||(s[0]=d=>o(t).expiry=d),class:"!rounded-r !border-y !border-r !border-l-0 !w-full !border-gray-300 !bg-white !m-0 !p-3",placeholder:r.$t("mmyy"),inputmode:"numeric",type:"tel",autocomplete:"cc-exp"},null,8,Se),[[V,o(t).expiry]]),e("input",{id:"gpos-card-expiry-month",type:"hidden",value:n.value},null,8,Ne),e("input",{id:"gpos-card-expiry-year",type:"hidden",value:a.value},null,8,Ae)]))}},ze={__name:"Expiry",setup(c){const{formSettings:t}=m(),n=t.expiry_style=="select"?Ce:Be;return(a,r)=>(l(),N(G(o(n))))}},Ee={class:"flex w-full"},Te={class:"inline-flex items-center px-3 text-sm border border-r-0 border-gray-300 rounded-l !bg-white"},Je={__name:"Cvc",setup(c){const t=m(),{card:n}=y(t);return(a,r)=>(l(),i("div",Ee,[e("span",Te,[v(o(R),{class:"w-6 h-6","aria-hidden":"true"})]),g(e("input",{id:"gpos-card-cvv","onUpdate:modelValue":r[0]||(r[0]=s=>o(n).cvv=s),class:"!rounded-r !border-y !border-r !border-l-0 !w-full !border-gray-300 !bg-white !m-0 !p-3",placeholder:"CVC",inputmode:"numeric",type:"tel",autocomplete:"cc-csc"},null,512),[[V,o(n).cvv]])]))}},De={class:"hidden"},qe=["id","onUpdate:modelValue"],Ke={__name:"HiddenCardData",setup(c){const{card:t}=y(m());return(n,a)=>(l(),i("div",De,[(l(),i(k,null,C(["type","brand","family","bank_name","country"],r=>g(e("input",{id:`gpos-card-${r.replaceAll("_","-")}`,key:r,"onUpdate:modelValue":s=>o(t)[r]=s,type:"hidden"},null,8,qe),[[V,o(t)[r]]])),64))]))}},je={class:"w-full bg-red-200 text-red-700 p-3 rounded font-semibold flex gap-2"},Oe={__name:"GatewayError",setup(c){return(t,n)=>(l(),i("div",je,[v(o(z),{class:"w-10"}),D(" "+u(t.$t("gateway_error")),1)]))}},{card:p}=y(m(j)),{checkBin:Ie}=m(j),b=window.jQuery,A=()=>{let c={};b(".gpos-checkout-class :input").each((t,n)=>{let a=b(n);if(!(a.attr("type")==="checkbox"&&!a.is(":checked"))){if(a.data("name")==="gpos-installment"){a.is(":checked")&&(c[a.data("name")]=a.val(),c["gpos-installment-rate"]=a.data("rate"));return}a.attr("id")&&(c[a.attr("id")]=a.val())}}),document.dispatchEvent(new CustomEvent("gpos-inputs-changed",{detail:c})),b("#gpos-card-bin").payment("formatCardNumber"),b("#gpos-card-expiry").payment("formatCardExpiry"),b("#gpos-card-cvc").payment("formatCardCVC")};J(p,A,{deep:!0});b(document).on({input:A,change:A},".gpos-checkout-class :input");let S="",w=null;document.addEventListener("gpos-inputs-changed",async c=>{var n,a,r,s,d,x,_,$;const t=await((n=c.detail["gpos-card-bin"])==null?void 0:n.replaceAll(/\s/g,"").slice(0,8));if((!t||t.length<8)&&(S="",p.value.type="",p.value.brand="",p.value.family="",p.value.bank_name="",p.value.country=""),S!==t&&t.length===8){S=t,w&&w.abort(),w=Ie(t);const h=await w;h&&h.success&&(p.value.type=(a=h.data)==null?void 0:a.type,p.value.brand=(r=h.data)==null?void 0:r.scheme,p.value.family=(s=h.data)==null?void 0:s.family,p.value.bank_name=(x=(d=h.data)==null?void 0:d.bank)==null?void 0:x.name,p.value.country=($=(_=h.data)==null?void 0:_.country)==null?void 0:$.name)}});let f=!1;const B=window.jQuery,U=()=>{f&&f.unmount(),f=window.gposCreateCheckoutApplication()};B(document).ready(U);B(document.body).on("updated_checkout",U);B(document).on("give_gateway_loaded",U);setInterval(()=>{(typeof f!="object"||!f.mount)&&U()},1e3);export{Re as _,ze as a,Je as b,Ke as c,Qe as d,Ge as e,Oe as f,A as i};
