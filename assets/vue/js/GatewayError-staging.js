import{p as T,u as z}from"./ajax-staging.js";import{u as p}from"./CheckoutStore-staging.js";import{s as y,an as q,o as d,c,a,g as f,u as r,X as L,f as H,t as v,F as w,x as k,E as M,l as Q,y as g,ao as Y,n as $,ag as G,ap as S,d as E,aq as J,w as x,p as C,ar as I,q as j,b as A,K,as as O,at as P,au as h,a6 as X}from"./vendor-staging.js";import{_ as W}from"./_plugin-vue_export-helper-staging.js";let b=!1;const U=window.jQuery,F=()=>{b&&b.unmount(),b=window.gposCreateCheckoutApplication()};U(document).ready(F);U(document.body).on("updated_checkout",F);U(document).on("give_gateway_loaded",F);setInterval(()=>{(typeof b!="object"||!b.mount)&&F()},1e3);const V=()=>{const i=window.jQuery;let t={};i(".gpos-checkout-class :input").each((l,e)=>{let s=i(e);if(!(s.attr("type")==="checkbox"&&!s.is(":checked"))){if(s.data("name")==="gpos-installment"){s.is(":checked")&&(t[s.data("name")]=s.val(),t["gpos-installment-rate"]=s.data("rate"));return}s.attr("id")&&(t[s.attr("id")]=s.val())}}),document.dispatchEvent(new CustomEvent("gpos-inputs-changed",{detail:t}))},{card:_,requestedBin:B,requestedInstallment:N,binRetrieveReq:D,gateway:Z,isInstallmentsActive:ee,installments:te,plugin:ne,isProActive:ae,platformData:se,selectedInstallment:R}=y(p(T)),{binRetrieve:oe,$:le}=p(T);document.addEventListener("gpos-inputs-changed",async()=>{var l;const i=(l=_.value.bin)==null?void 0:l.replace(/\D/g,"").slice(0,8),t=R.value;if(!i||i.length<8){B.value="",_.value.type="",_.value.brand="",_.value.family="",_.value.bank_name="",_.value.bank_code="",_.value.country="",_.value.country_code="";return}(B.value!==i||N.value!==t)&&(B.value=i,N.value=t,D.value&&D.value.abort(),await oe({bin:i,plugin:ne.value,total:se.value.amount,installment:t}).then(e=>{ae&&(Z.value=e==null?void 0:e.gateway,te.value=e==null?void 0:e.installments,ee.value=e==null?void 0:e.is_installments_active),_.value.type=e.card.type,_.value.brand=e.card.brand,_.value.family=e.card.family,_.value.bank_name=e.bank.name,_.value.bank_code=e.bank.code,_.value.country_code=e.country.code,_.value.country=e.country.name}),V())});q(_,V,{deep:!0});q(R,V);le(document).on({input:V},".gpos-checkout-class :input");const re={class:"bg-yellow-100 text-yellow-700 p-3 flex flex-col rounded gap-2"},ie={class:"flex items-center justify-between text-lg font-semibold"},de={class:"flex items-center gap-2"},ce=["src"],ue={key:0},_e=a("th",null,null,-1),ve={class:"hidden md:table-cell"},me=a("th",{class:"hidden md:table-cell"}," Cvc ",-1),pe=a("th",{class:"hidden md:table-cell"}," 3ds ",-1),ye=a("th",null,null,-1),fe=["src"],he={class:"hidden md:table-cell"},xe={class:"hidden md:table-cell"},ge={class:"hidden md:table-cell"},at={__name:"TestMode",setup(i){const{card:t,gateway:l,assetsUrl:e}=y(p()),s=o=>{t.value.bin=o.bin,t.value.expiry_month=o.expiry_month,t.value.expiry_year=o.expiry_year,t.value.expiry=`${o.expiry_month} / ${o.expiry_year}`,t.value.cvv=o.cvv};return(o,n)=>(d(),c("div",re,[a("div",ie,[a("div",de,[f(r(L),{class:"w-6"}),H(v(o.$t("test_mode_title")),1)]),a("img",{src:r(l).logo,class:"w-[80px] max-h-[40px]"},null,8,ce)]),a("div",null,v(o.$t("test_mode_checkout_desc")),1),r(l).test_cards.length>0?(d(),c("table",ue,[a("tr",null,[_e,a("th",null,v(o.$t("card_bin")),1),a("th",ve,v(o.$t("month_year")),1),me,pe,ye]),a("tbody",null,[(d(!0),c(w,null,k(r(l).test_cards,(u,m)=>(d(),c("tr",{key:m,class:"!border-b !border-yellow-700"},[a("td",null,[a("img",{class:"!w-8",src:`${r(e)}/images/card/${u.brand}.svg`},null,8,fe)]),a("td",null,v(u.bin),1),a("td",he,v(u.expiry_month)+"/"+v(u.expiry_year),1),a("td",xe,v(u.cvv),1),a("td",ge,v(u.secure),1),a("td",null,[f(r(M),{class:"!w-6 cursor-pointer",onClick:We=>s(u)},null,8,["onClick"])])]))),128))])])):Q("",!0)]))}},be={class:"inline-flex relative !rounded-l items-center justify-start text-sm !bg-white !w-12 !min-w-max"},$e=["placeholder"],st={__name:"HolderName",setup(i){const t=g(!1);return(l,e)=>(d(),c("div",{class:$(`flex w-full border !rounded ${t.value?"border-blue-700":"border-gray-300"}`)},[a("span",be,[f(r(Y),{class:"w-6 h-6 mx-3","aria-hidden":"true"})]),a("input",{id:"gpos-card-holder-name",type:"text",placeholder:l.$t("name_on_card"),onFocus:e[0]||(e[0]=s=>t.value=!t.value),onFocusout:e[1]||(e[1]=s=>t.value=!t.value)},null,40,$e)],2))}},we={},ke={class:"dot-spinner mx-3"},Ce=G('<div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div><div class="dot-spinner__dot"></div>',8),Fe=[Ce];function Ve(i,t){return d(),c("div",ke,Fe)}const Be=W(we,[["render",Ve]]),Ee={class:"inline-flex relative !rounded-l items-center justify-start text-sm !bg-white !w-12 !min-w-max"},Se=["src"],ot={__name:"BinNumber",setup(i){const{card:t,assetsUrl:l}=y(p()),{loading:e}=y(z()),s=g(!1);return(o,n)=>{const u=S("cardformat");return d(),c("div",{class:$(`flex w-full !border !rounded ${s.value?"!border-blue-700":"!border-gray-300"}`)},[a("span",Ee,[r(e)?(d(),E(Be,{key:0,class:"!w-6 !h-6"})):["visa","mastercard","amex"].includes(r(t).brand)?(d(),c("img",{key:1,class:"!w-12 !h-12 !m-0",src:`${r(l)}/images/card/${r(t).brand}.svg`},null,8,Se)):(d(),E(r(J),{key:2,class:"!w-6 h-6 !mx-3","aria-hidden":"true"}))]),x(a("input",{id:"gpos-card-bin","onUpdate:modelValue":n[0]||(n[0]=m=>r(t).bin=m),class:"",placeholder:"•••• •••• •••• ••••",inputmode:"numeric",type:"tel",autocomplete:"cc-number",onFocus:n[1]||(n[1]=m=>s.value=!s.value),onFocusout:n[2]||(n[2]=m=>s.value=!s.value)},null,544),[[C,r(t).bin],[u,void 0,"formatCardNumber"]])],2)}}},Ue={class:"inline-flex relative !rounded-l items-center justify-center text-sm !bg-white !w-12 !min-w-max"},je={class:"flex w-full"},Ae={value:""},Ne=["value","textContent"],De={value:""},Te=["value","textContent"],qe={__name:"Select",setup(i){const t=p(),{card:l}=y(t),e=g(!1);return(s,o)=>(d(),c("div",{class:$(`flex w-full !border !rounded ${e.value?"!border-blue-700":"!border-gray-300"}`)},[a("span",Ue,[f(r(I),{class:"!w-6 !h-6 !mx-3","aria-hidden":"true"})]),a("div",je,[x(a("select",{id:"gpos-card-expiry-month","onUpdate:modelValue":o[0]||(o[0]=n=>r(l).expiry_month=n),autocomplete:"cc-exp-month",class:"!border-0 !rounded-r !bg-white !m-0 !p-3 !focus:ring-0 !outline-0 !focus:ring-offset-0 !w-1/2",onFocus:o[1]||(o[1]=n=>e.value=!e.value),onFocusout:o[2]||(o[2]=n=>e.value=!e.value)},[a("option",Ae,v(s.$t("mm")),1),(d(),c(w,null,k(["01","02","03","04","05","06","07","08","09","10","11","12"],n=>a("option",{key:n,value:n,textContent:v(n)},null,8,Ne)),64))],544),[[j,r(l).expiry_month]]),x(a("select",{id:"gpos-card-expiry-year","onUpdate:modelValue":o[3]||(o[3]=n=>r(l).expiry_year=n),autocomplete:"cc-exp-year",class:"!border-0 !rounded-r !bg-white !m-0 !p-3 !focus:ring-0 !outline-0 !focus:ring-offset-0 !w-1/2",onFocus:o[4]||(o[4]=n=>e.value=!e.value),onFocusout:o[5]||(o[5]=n=>e.value=!e.value)},[a("option",De,v(s.$t("yy")),1),(d(),c(w,null,k(["2023","2024","2025","2026","2027","2028","2029","2030","2031","2032","2033"],n=>a("option",{key:n,value:n,textContent:v(n)},null,8,Te)),64))],544),[[j,r(l).expiry_year]])])],2))}},He={class:"inline-flex relative !rounded-l items-center justify-center text-sm !bg-white !w-12 !min-w-max"},Ie=["placeholder"],Re=["value"],ze=["value"],Le={__name:"Text",setup(i){const{card:t}=y(p()),l=g(!1),e=A(()=>{var o,n;return(n=(o=t.value.expiry)==null?void 0:o.replaceAll(/\s/g,""))==null?void 0:n.split("/")[0]}),s=A(()=>{var o,n,u;return(u=(n=(o=t.value.expiry)==null?void 0:o.replaceAll(/\s/g,""))==null?void 0:n.split("/")[1])==null?void 0:u.slice(-2)});return(o,n)=>{const u=S("cardformat");return d(),c("div",{class:$(`flex w-full !border !rounded ${l.value?"!border-blue-700":"!border-gray-300"}`)},[a("span",He,[f(r(I),{class:"!w-6 !h-6","aria-hidden":"true"})]),x(a("input",{id:"gpos-card-expiry","onUpdate:modelValue":n[0]||(n[0]=m=>r(t).expiry=m),placeholder:o.$t("mmyy"),inputmode:"numeric",type:"tel",autocomplete:"cc-exp",onFocus:n[1]||(n[1]=m=>l.value=!l.value),onFocusout:n[2]||(n[2]=m=>l.value=!l.value)},null,40,Ie),[[C,r(t).expiry],[u,void 0,"formatCardExpiry"]]),a("input",{id:"gpos-card-expiry-month",type:"hidden",value:e.value},null,8,Re),a("input",{id:"gpos-card-expiry-year",type:"hidden",value:s.value},null,8,ze)],2)}}},lt={__name:"Expiry",setup(i){const{formSettings:t}=p(),l=t.expiry_style=="select"?qe:Le;return(e,s)=>(d(),E(K(r(l))))}},Me={class:"inline-flex relative !rounded-l !items-center justify-center text-sm !bg-white !w-12 !min-w-max"},Qe=a("div",{class:"!w-6 !h-6 absolute","aria-hidden":"true",style:{"backface-visibility":"hidden"}},null,-1),Ye=["src"],rt={__name:"Cvc",setup(i){const t=p(),{card:l,assetsUrl:e}=y(t),s=g(!1);return(o,n)=>{const u=S("cardformat");return d(),c("div",{class:$(`relative flex w-full !border !bg-white !rounded ${s.value?"!border-blue-700":"!border-gray-300"}`)},[a("span",Me,[f(r(O),{class:"!w-6 !h-6 !mx-3","aria-hidden":"true"})]),x(a("input",{id:"gpos-card-cvv","onUpdate:modelValue":n[0]||(n[0]=m=>r(l).cvv=m),placeholder:"CVC",inputmode:"numeric",type:"tel",autocomplete:"cc-csc",onFocus:n[1]||(n[1]=m=>s.value=!s.value),onFocusout:n[2]||(n[2]=m=>s.value=!s.value)},null,544),[[C,r(l).cvv],[u,void 0,"formatCardCVC"]]),a("span",{class:"inline-flex relative !rounded-r z-10 items-center justify-center text-sm !bg-white !w-12 !min-w-max !px-2",style:P(`${s.value?"transform: rotateY(180deg);":""}   transform-style: preserve-3d;
        transition: transform 0.5s;`)},[Qe,a("img",{class:"!w-8 !h-6 absolute",src:`${r(e)}/images/cvc.svg`,style:{"backface-visibility":"hidden",transform:"rotateY(180deg)"}},null,8,Ye)],4)],2)}}},Ge={class:"hidden"},Je=["id","onUpdate:modelValue"],it={__name:"HiddenCardData",setup(i){const{card:t}=y(p());return(l,e)=>(d(),c("div",Ge,[(d(),c(w,null,k(["type","brand","family","bank_name","bank_code","country","country_code"],s=>x(a("input",{id:`gpos-card-${s.replaceAll("_","-")}`,key:s,"onUpdate:modelValue":o=>r(t)[s]=o,type:"hidden"},null,8,Je),[[C,r(t)[s]]])),64))]))}},Ke=i=>{const t=document.getElementById("_gpos_nonce").value,l=h.random.getBytesSync(16),e=h.cipher.createCipher("AES-CBC",h.util.hexToBytes(h.md.sha256.create().update(t).digest().toHex()));return e.start({iv:l}),e.update(h.util.createBuffer(i,"utf8")),e.finish(),{hex:e.output.toHex(),iv:h.util.bytesToHex(l)}},Oe=["value"],Pe=["value"],dt={__name:"Fragments",setup(i){const t=g("");return document.addEventListener("gpos-inputs-changed",async l=>{t.value=Ke(JSON.stringify(l.detail))}),(l,e)=>(d(),c("div",null,[a("input",{type:"hidden",name:"_wp_refreshed_fragments",value:t.value.hex},null,8,Oe),a("input",{type:"hidden",name:"_wp_fragment",value:t.value.iv},null,8,Pe)]))}},Xe={class:"w-full bg-red-200 text-red-700 p-3 rounded font-semibold flex gap-2"},ct={__name:"GatewayError",setup(i){return(t,l)=>(d(),c("div",Xe,[f(r(X),{class:"w-10"}),H(" "+v(t.$t("gateway_error")),1)]))}};export{ot as _,lt as a,rt as b,it as c,at as d,st as e,dt as f,ct as g,V as i};
