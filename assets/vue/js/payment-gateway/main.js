import{i as T,S as j,o,c as r,g as i,a as s,u as t,N as M,f as m,t as c,r as V,s as b,d as k,e as w,z as $,F as h,l as x,w as v,m as S,n as U,k as F,O as N,h as B,P as D,Q as R,R as G,K as z,T as P,U as Q,B as q,C as E}from"../vendor/main.js";import{a as y,p as K}from"../ajax/main.js";import{u as I,_ as L}from"../Page/main.js";import{a as H,_ as J}from"../Warning/main.js";import{_ as A}from"../PrimaryButton/main.js";import{_ as W}from"../Switch/main.js";/* empty css              */const g=T("GatewayAccount",{state:()=>({gatewayAccount:window.gpos.gateway_account||{},assetsUrl:window.gpos.assets_url||"/"}),actions:{async updateAccountSettings(){await y.post("update_account_settings",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings}),this.swal(window.gpos.alert_texts.setting_saved)},async updateInstallments(){await y.post("update_installments",{id:this.gatewayAccount.id,installments:this.gatewayAccount.installments}),this.swal(window.gpos.alert_texts.setting_saved)},async resetInstallments(){await y.post("update_installments",{id:this.gatewayAccount.id,installments:!1}),this.swal(window.gpos.alert_texts.setting_saved,"success",()=>{window.location.reload()})},async getInstallments(){const d=await y.post("get_installments_from_api",{id:this.gatewayAccount.id});let e={};d.result==="success"?(this.gatewayAccount.installments=d.installments,e={text:window.gpos.alert_texts.installments_applied,icon:"success"}):e={text:`${window.gpos.alert_texts.installments_get_error} : ${d.installments}`,icon:"error"},this.swal(e.text,e.icon)},async updateInstallmentStatus(){await y.post("update_installment_status",{id:this.gatewayAccount.id,status:this.gatewayAccount.is_installments_active})},async testConnection(){const d=await y.post("check_connection",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings});this.swal(d.message,d.result)},async deleteAccount(){await y.post("remove_gateway_account",{id:this.gatewayAccount.id}),this.swal(window.gpos.alert_texts.deletion_completed,"success",()=>{window.location.href="/wp-admin/admin.php?page=gpos-payment-gateways"})},swal(d,e="success",n){j.fire({text:d,icon:e,confirmButtonText:window.gpos.alert_texts.ok,confirmButtonColor:"#1A56DB"}).then(n)}}}),X={class:"w-full flex justify-between items-center border border-gray-100 rounded-lg p-5 bg-white shadow-md"},Y={__name:"TestDelete",setup(d){const{deleteAccount:e}=g();return(n,_)=>(o(),r("div",X,[i(H),s("button",{class:"text-xs text-red-600 flex gap-1 items-center font-medium",onClick:_[0]||(_[0]=(...l)=>t(e)&&t(e)(...l))},[i(t(M),{class:"w-5 h-5"}),m(c(n.$t("delete_gateway")),1)])]))}},Z=["href"],O={key:1,type:"button",class:"!text-blue-700 border border-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},tt={__name:"OutlineButton",props:["href"],setup(d){return(e,n)=>d.href?(o(),r("a",{key:0,href:d.href,class:"!text-blue-700 border border-blue-700 !focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},[V(e.$slots,"default")],8,Z)):(o(),r("button",O,[V(e.$slots,"default")]))}},et={class:"w-full flex flex-wrap"},st={class:"flex gap-1 items-center mb-2"},at={class:"block text-sm font-medium text-gray-900"},nt=["onUpdate:modelValue","placeholder"],ot=["onUpdate:modelValue"],lt=["value"],rt={__name:"ApiFieldCreator",setup(d){const{isTestMode:e}=b(I()),{gatewayAccount:n}=b(g());return(_,l)=>(o(),r("div",et,[t(e)?(o(),k(J,{key:0,class:"m-2 p-2 w-full"},{content:w(()=>[m(c(_.$t("test_mode_content")),1)]),default:w(()=>[m(c(_.$t("test_mode_title"))+" ",1)]),_:1})):$("",!0),(o(!0),r(h,null,x(t(n).gateway_property.fields,(a,p)=>(o(),r("div",{key:p,class:"w-1/2 p-2"},[s("div",st,[s("label",at,c(t(e)?"Test":"")+" "+c(a.label),1)]),a.type==="text"?v((o(),r("input",{key:0,"onUpdate:modelValue":u=>t(n).gateway_settings[t(e)?`test_${a.model}`:a.model]=u,type:"text",class:U(`!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3 ${t(e)?"placeholder:text-gray-300":"placeholder:text-gray-600"}`),placeholder:a.label,required:""},null,10,nt)),[[S,t(n).gateway_settings[t(e)?`test_${a.model}`:a.model]]]):$("",!0),a.type==="select"?v((o(),r("select",{key:1,"onUpdate:modelValue":u=>t(n).gateway_settings[t(e)?`test_${a.model}`:a.model]=u,class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3"},[(o(!0),r(h,null,x(a.options,(u,f)=>(o(),r("option",{key:f,value:f},c(u),9,lt))),128))],8,ot)),[[F,t(n).gateway_settings[t(e)?`test_${a.model}`:a.model]]]):$("",!0)]))),128))]))}},ct={class:"w-full flex gap-10 bg-white p-6 rounded-lg shadow-md"},it={class:"w-3/5 flex flex-col gap-6"},dt={class:"flex w-full justify-start gap-2 p-2"},ut={class:"w-2/5"},_t={class:"w-full flex flex-col gap-2"},pt={class:"flex justify-between items-start"},gt=["src"],mt={class:"text-lg text-gray-500"},wt=["href"],yt={__name:"ApiFields",setup(d){const{testConnection:e,updateAccountSettings:n}=g(),{gatewayAccount:_}=g();return(l,a)=>(o(),r("div",ct,[s("div",it,[i(rt),s("div",dt,[i(tt,{onClick:t(e)},{default:w(()=>[i(t(N),{class:"w-4 h-4 mr-2"}),m(c(l.$t("connect_test")),1)]),_:1},8,["onClick"]),i(A,{onClick:t(n)},{default:w(()=>[i(t(B),{class:"w-4 h-4 mr-2"}),m(c(l.$t("save_settings")),1)]),_:1},8,["onClick"])])]),s("div",ut,[s("div",_t,[s("div",pt,[s("img",{class:"w-1/4",src:t(_).gateway_property.logo},null,8,gt)]),s("p",mt,c(l.$t(`${t(_).gateway_id}.description`)),1),s("a",{href:t(_).gateway_property.merchant_panel,target:"_blank",class:"mt-2 text-blue-700 text-sm flex gap-1 items-center"},[m(c(l.$t("gateway_screen")),1),i(t(D),{class:"w-3 h-3 text-blue-700"})],8,wt)])])]))}},ft={__name:"AutoFill",setup(d){const{getInstallments:e,gatewayAccount:n}=g();return(_,l)=>t(n).gateway_property.supports.includes("installment_api")?(o(),k(A,{key:0,onClick:l[0]||(l[0]=a=>t(e)())},{default:w(()=>[m(c(_.$t("get_installment_rates")),1)]),_:1})):$("",!0)}};const ht={class:"w-full text-sm text-gray-500"},xt={class:"text-xs text-gray-700 bg-gray-50"},bt=["textContent"],$t={class:"py-2 font-medium text-gray-900 whitespace-nowrap"},vt=["src"],kt={class:"flex items-center"},At=["onUpdate:modelValue"],Ct=s("div",{class:"!bg-gray-200 !border !border-r-0 !border-gray-300 !text-gray-900 !text-md !rounded-l-md p-1"}," % ",-1),Vt=["onUpdate:modelValue","disabled"],St={__name:"RateTable",setup(d){const{gatewayAccount:e,assetsUrl:n}=b(g());return(_,l)=>(o(),r("table",ht,[s("thead",xt,[s("tr",null,[(o(),r(h,null,x(["#","2","3","4","5","6","7","8","9","10","11","12"],a=>s("th",{key:a,scope:"col",class:"py-2",textContent:c(a)},null,8,bt)),64))])]),s("tbody",null,[(o(!0),r(h,null,x(t(e).installments,(a,p)=>(o(),r("tr",{key:p,class:"bg-white border-b cursor-pointer"},[s("th",$t,[s("img",{src:`${t(n)}/images/card/${p}.svg`,class:"rounded-lg"},null,8,vt)]),(o(!0),r(h,null,x(a,u=>(o(),r("td",{key:u.number,class:"font-medium text-gray-900 whitespace-nowrap text-center p-1"},[s("div",kt,[v(s("input",{"onUpdate:modelValue":f=>u.enabled=f,type:"checkbox",class:"text-blue-600 bg-gray-100 border-gray-300 rounded"},null,8,At),[[R,u.enabled]]),Ct,v(s("input",{"onUpdate:modelValue":f=>u.rate=f,disabled:!u.enabled,type:"text",class:U(`!border !border-l-0 !border-gray-300 !text-gray-900 !text-sm !rounded-r-md w-full ${u.enabled?"!bg-white":"!bg-gray-200"}`)},null,10,Vt),[[S,u.rate]])])]))),128))]))),128))])]))}},Ut={class:"w-full flex flex-col gap-6 bg-white p-6 rounded-lg shadow-md"},Bt={class:"text-2xl w-full font-bold text-[#111928]"},It={class:"w-full flex items-center justify-between"},Tt={class:"flex gap-2 justify-between items-end"},jt={__name:"Installments",setup(d){const{gatewayAccount:e}=b(g()),{updateInstallmentStatus:n,updateInstallments:_,resetInstallments:l}=g();return(a,p)=>(o(),r("div",Ut,[s("div",Bt,c(a.$t("installment_options")),1),s("div",It,[i(W,{modelValue:t(e).is_installments_active,"onUpdate:modelValue":p[0]||(p[0]=u=>t(e).is_installments_active=u),value:"installment_status",onChange:p[1]||(p[1]=u=>t(n)())},{default:w(()=>[m(c(a.$t("activate_installment")),1)]),_:1},8,["modelValue"]),i(ft)]),i(St),s("div",Tt,[i(A,{class:"w-max",onClick:p[2]||(p[2]=u=>t(_)())},{default:w(()=>[i(t(B),{class:"w-4 h-4 mr-2"}),m(" "+c(a.$t("save_settings")),1)]),_:1}),s("span",{class:"text-red-600 underline cursor-pointer",onClick:p[3]||(p[3]=u=>t(l)())},c(a.$t("reset_settings")),1)])]))}},Mt={class:"bg-white p-6 rounded-lg shadow-md flex flex-col gap-3"},Ft={class:"text-2xl font-bold text-[#111928]"},Nt={class:"w-full flex flex-wrap gap-5 mt-4"},Dt={class:"text-base"},Rt={class:"text-2xl font-bold text-[#111928]"},Gt={class:"flex items-center flex-wrap break-words bg-gray-50 rounded-lg py-4 px-3"},zt={class:"flex gap-2 items-center"},Pt={class:"text-xs text-gray-900 font-medium"},Qt={__name:"Supports",setup(d){const{gatewayAccount:e}=g();return(n,_)=>(o(),r("div",Mt,[s("span",Ft,c(n.$t("supports_features")),1),s("div",Nt,[(o(!0),r(h,null,x(t(e).gateway_property.supports,(l,a)=>(o(),r("div",{key:a,class:"w-72 flex justify-between py-4 px-3 bg-gray-50 rounded-lg items-center"},[s("span",Dt,c(n.$t(l)),1),i(t(G),{class:"w-6 h-6 text-green-300"})]))),128))]),s("span",Rt,c(n.$t("supports_currency")),1),s("div",Gt,[s("div",zt,[i(t(z),{class:"w-5 h-5 text-gray-900"}),s("span",Pt,c(t(e).gateway_property.currencies.join(", ")),1)])])]))}},qt={class:"text-blue-600 text-md"},Et={class:"w-full flex flex-col gap-6"},Kt={__name:"App",setup(d){const{gatewayAccount:e}=b(g()),{paymentGateways:n}=I();P(()=>{e.value.gateway_property=n.find(a=>a.id===e.value.gateway_id);const l=window.jQuery;l("#toplevel_page_gurmepos").addClass("wp-has-current-submenu"),l(".toplevel_page_gurmepos").addClass("wp-has-current-submenu"),l("a[href='admin.php?page=gpos-payment-gateways']").parent("li").addClass("current")});const _=()=>{window.history.back()};return(l,a)=>(o(),k(L,{text:t(e).gateway_property.title,href:`https://yardim.gurmehub.com/docs/pos-entegrator/odeme-yontemleri/${t(e).gateway_property.id}-sanal-pos-ayarlar/`},{default:w(()=>[s("span",{class:"w-max flex gap-1 items-center my-4 cursor-pointer",onClick:_},[i(t(Q),{class:"text-blue-600 w-6 h-6"}),s("span",qt,c(l.$t("back_to")),1)]),s("div",Et,[i(Y),i(yt),i(jt),i(Qt)])]),_:1},8,["text","href"]))}},Lt=q({locale:"default",messages:window.gpos.strings,legacy:!1}),C=E(Kt);C.use(K);C.use(Lt);C.mount("#app");
