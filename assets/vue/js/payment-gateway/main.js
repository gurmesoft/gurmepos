import{e as G,S as x,o as r,a as d,r as v,b as t,h as n,u as e,G as M,H as N,s as $,f as C,g as u,q as y,t as o,w as A,p as B,n as w,F as h,J as S,j as i,C as T,T as U,y as F,K as O,B as Q,k as R,l as z}from"../vendor/main.js";import{a as b,u as E,_ as H,p as J}from"../tailwind/main.js";import{_ as j}from"../PrimaryButton/main.js";import{_ as K}from"../Warning/main.js";const L=G("GatewayAccount",{state:()=>({gatewayAccount:window.gpos.gateway_account||{}}),actions:{async updateAccountSettings(){await b.post("update_account_settings",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings}),x.fire({text:"Ayarlar kayıt edildi.",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async testConnection(){const _=await b.post("check_connection",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings});x.fire({text:_.message,icon:_.result,confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async deleteAccount(){return await b.post("remove_gateway_account",{id:this.gatewayAccount.id})}}}),P=["href"],W={key:1,type:"button",class:"!text-blue-700 border border-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},V={__name:"OutlineButton",props:["href"],setup(_){return(l,a)=>_.href?(r(),d("a",{key:0,href:_.href,class:"!text-blue-700 border border-blue-700 !focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},[v(l.$slots,"default")],8,P)):(r(),d("button",W,[v(l.$slots,"default")]))}},X={class:"w-72 flex justify-between py-4 px-3 bg-gray-50 rounded-lg items-center"},Y={class:"text-base"},Z={__name:"FeatureBadge",setup(_){return(l,a)=>(r(),d("div",X,[t("span",Y,[v(l.$slots,"default")]),n(e(M),{class:"w-6 h-6 text-green-300"})]))}},ee={class:"w-full flex gap-5"},te={class:"w-3/5"},se={class:"w-full flex flex-wrap"},ae={class:"w-full"},oe={class:"block mb-2 text-sm font-medium text-gray-900"},ne=["onUpdate:modelValue","placeholder","disabled"],le={class:"w-full flex justify-between items-center p-2 mt-4"},ce={key:0,class:"bg-yellow-50 rounded-lg border-2 border-yellow-600 border-dashed py-10 px-3 mt-5"},re={class:"w-full flex flex-wrap"},ie={class:"w-full"},de={class:"block mb-2 text-sm font-medium text-gray-900"},ue=["onUpdate:modelValue","placeholder"],_e={class:"w-full flex justify-between items-center p-2 mt-4"},pe={class:"w-2/5"},me={class:"w-full flex flex-col gap-2"},ge=["src"],fe={class:"text-lg text-gray-500"},ye=["href"],we={class:"mt-10"},he={class:"text-2xl font-bold text-[#111928]"},be={class:"w-full flex flex-wrap gap-5 mt-4"},xe={class:"mt-5"},ve={class:"text-2xl font-bold text-[#111928]"},ke={class:"w-1/2 flex items-center flex-wrap break-words bg-gray-50 rounded-lg py-4 px-3 mt-4"},$e={class:"flex gap-2 items-center"},Ce={class:"text-xs text-gray-900 font-medium"},Ae={__name:"App",setup(_){N(()=>{const s=jQuery("#toplevel_page_gurmepos"),g=jQuery(".toplevel_page_gurmepos");s.addClass("wp-has-current-submenu"),g.addClass("wp-has-current-submenu"),g.siblings("ul").children("li").eq(2).addClass("current")});const l=L(),{gatewayAccount:a}=$(l),I=E(),{isTestMode:p,paymentGateways:q}=$(I);a.value.gateway_property=q.value.find(s=>s.id===a.value.gateway_id);const D=async()=>{await l.deleteAccount(),x.fire({text:"Silme işlemi tamamlandı.",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"}).then(function(){window.location.href="/wp-admin/admin.php?page=gpos-payment-gateways"})};return(s,g)=>(r(),C(H,null,{default:u(()=>[t("div",ee,[t("div",te,[t("div",se,[(r(!0),d(h,null,y(e(a).gateway_property.fields,(c,m)=>(r(),d("div",{key:m,class:"w-1/2 p-2"},[t("div",ae,[t("label",oe,o(c.label),1),A(t("input",{"onUpdate:modelValue":f=>e(a).gateway_settings[c.model]=f,type:"text",class:w(`!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3 ${e(p)?"placeholder:text-gray-300":"placeholder:text-gray-600"}`),placeholder:c.label,required:"",disabled:e(p)},null,10,ne),[[B,e(a).gateway_settings[c.model]]])])]))),128)),t("div",le,[t("div",null,[n(V,{class:w(`${e(p)?"!border-gray-100 !text-gray-200":"bg-white"}`),disabled:e(p),onClick:e(l).testConnection},{default:u(()=>[n(e(S),{class:"w-4 h-4 mr-2"}),i(" "+o(s.$t("connect_test")),1)]),_:1},8,["class","disabled","onClick"]),n(j,{class:w(`${e(p)?"!bg-gray-100":"!bg-blue-700"}`),disabled:e(p),onClick:e(l).updateAccountSettings},{default:u(()=>[n(e(T),{class:"w-4 h-4 mr-2"}),i(" "+o(s.$t("save_settings")),1)]),_:1},8,["class","disabled","onClick"])]),t("button",{class:"mt-6 text-xs text-red-600 flex gap-1 items-center font-medium",onClick:D},[n(e(U),{class:"w-3 h-3"}),i(o(s.$t("delete_gateway")),1)])])]),e(p)?(r(),d("div",ce,[n(K,{class:"!border-0"},{content:u(()=>[i(o(s.$t("test_mode_content")),1)]),default:u(()=>[i(o(s.$t("test_mode_title"))+" ",1)]),_:1}),t("div",re,[(r(!0),d(h,null,y(e(a).gateway_property.test_fields,(c,m)=>(r(),d("div",{key:m,class:"w-1/2 p-2"},[t("div",ie,[t("label",de,o(c.label),1),A(t("input",{"onUpdate:modelValue":f=>e(a).gateway_settings[c.model]=f,type:"text",class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3",placeholder:c.label,required:""},null,8,ue),[[B,e(a).gateway_settings[c.model]]])])]))),128))]),t("div",_e,[t("div",null,[n(V,{onClick:e(l).testConnection},{default:u(()=>[n(e(S),{class:"w-4 h-4 mr-2"}),i(o(s.$t("connect_test")),1)]),_:1},8,["onClick"]),n(j,{onClick:e(l).updateAccountSettings},{default:u(()=>[n(e(T),{class:"w-4 h-4 mr-2"}),i(o(s.$t("save_settings")),1)]),_:1},8,["onClick"])])])])):F("",!0)]),t("div",pe,[t("div",me,[t("img",{class:"w-1/4",src:e(a).gateway_property.logo},null,8,ge),t("p",fe,o(s.$t(`${e(a).gateway_id}.description`)),1),t("a",{href:e(a).gateway_property.merchant_panel,target:"_blank",class:"mt-2 text-blue-700 text-sm flex gap-1 items-center"},[i(o(s.$t("gateway_screen")),1),n(e(O),{class:"w-3 h-3 text-blue-700"})],8,ye)])])]),t("div",we,[t("span",he,o(s.$t("supports_features")),1),t("div",be,[(r(!0),d(h,null,y(e(a).gateway_property.supports,(c,m)=>(r(),C(Z,{key:m},{default:u(()=>[i(o(s.$t(c)),1)]),_:2},1024))),128))])]),t("div",xe,[t("span",ve,o(s.$t("supports_currency")),1),t("div",ke,[t("div",$e,[n(e(Q),{class:"w-5 h-5 text-gray-900"}),t("span",Ce,o(e(a).gateway_property.currencies.join(", ")),1)])])])]),_:1}))}},Be=R({locale:"default",messages:window.gpos.strings}),k=z(Ae);k.use(J);k.use(Be);k.mount("#app");
