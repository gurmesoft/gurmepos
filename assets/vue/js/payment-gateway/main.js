import{d as E,S as h,o as l,a as r,r as V,b as t,g as o,u as e,K as F,s as U,w as $,E as K,t as i,i as j,n as B,F as f,A as k,L as P,e as D,f as p,j as w,J as O,M,h as d,k as S,N as L,O as N,C as Q,l as R,m as J}from"../vendor/main.js";import{a as x,u as H,_ as W,p as X}from"../tailwind/main.js";import{_ as T}from"../PrimaryButton/main.js";import{_ as Y}from"../Switch/main.js";import{_ as Z,a as tt}from"../Info/main.js";const q=E("GatewayAccount",{state:()=>({gatewayAccount:window.gpos.gateway_account||{}}),actions:{async updateAccountSettings(){await x.post("update_account_settings",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings}),h.fire({text:"Ayarlar kayıt edildi.",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async updateInstallments(){await x.post("update_installments",{id:this.gatewayAccount.id,installments:this.gatewayAccount.installments}),h.fire({text:"Ayarlar kayıt edildi.",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async getInstallments(){const u=await x.post("get_installments_from_api",{id:this.gatewayAccount.id});u.result==="success"?(this.gatewayAccount.installments=u.installments,h.fire({text:"Taksitler Uygulandı",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})):h.fire({text:`Taksitler getirilirken hata: ${u.installments}`,icon:"error",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async updateInstallmentStatus(){await x.post("update_installment_status",{id:this.gatewayAccount.id,status:this.gatewayAccount.is_installments_active})},async testConnection(){const u=await x.post("check_connection",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings});h.fire({text:u.message,icon:u.result,confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async deleteAccount(){return await x.post("remove_gateway_account",{id:this.gatewayAccount.id})}}}),et=["href"],st={key:1,type:"button",class:"!text-blue-700 border border-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},z={__name:"OutlineButton",props:["href"],setup(u){return(n,a)=>u.href?(l(),r("a",{key:0,href:u.href,class:"!text-blue-700 border border-blue-700 !focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},[V(n.$slots,"default")],8,et)):(l(),r("button",st,[V(n.$slots,"default")]))}},at={class:"w-72 flex justify-between py-4 px-3 bg-gray-50 rounded-lg items-center"},nt={class:"text-base"},lt={__name:"FeatureBadge",setup(u){return(n,a)=>(l(),r("div",at,[t("span",nt,[V(n.$slots,"default")]),o(e(F),{class:"w-6 h-6 text-green-300"})]))}},ot={class:"px-2 py-3"},rt=["disabled"],it={scope:"row",class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap"},ct={class:"px-6 py-3"},dt={class:"flex gap-1 items-center"},ut=["disabled"],pt=t("span",{class:"font-bold"},"%",-1),G={__name:"InstallmentTableRow",props:["installment"],setup(u){const n=u,a=q(),{gatewayAccount:y}=U(a);return(m,b)=>(l(),r(f,null,[t("th",ot,[$(t("input",{"onUpdate:modelValue":b[0]||(b[0]=v=>e(y).installments[n.installment].enabled=v),type:"checkbox",value:"",class:"!w-4 !h-4 !text-blue-600 !bg-gray-100 !border-gray-300 !rounded !focus:ring-blue-500 !focus:ring-2",disabled:n.installment===1},null,8,rt),[[K,e(y).installments[n.installment].enabled]])]),t("td",it,i(n.installment)+" Taksit ",1),t("td",ct,[t("div",dt,[$(t("input",{"onUpdate:modelValue":b[1]||(b[1]=v=>e(y).installments[n.installment].rate=v),class:B(`!w-32 !bg-gray-50 !border !border-gray-300 !text-sm !rounded-xl focus:ring-blue-500 focus:border-blue-500 block !p-2  ${n.installment===1?"!text-gray-300":"!text-gray-900"}`),disabled:n.installment===1},null,10,ut),[[j,e(y).installments[n.installment].rate]]),pt])])],64))}},mt={class:"w-full text-sm text-left text-gray-500 max-w-min my-4 block"},_t=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-3"}),t("th",{scope:"col",class:"px-6 py-3"}," Taksit "),t("th",{scope:"col",class:"px-6 py-3"}," Oran "),t("th",{class:"px-12"}),t("th",{scope:"col",class:"px-3 py-3"}),t("th",{scope:"col",class:"px-6 py-3"}," Taksit "),t("th",{scope:"col",class:"px-6 py-3"}," Oran ")])],-1),gt=t("td",{class:"px-12"},null,-1),yt={__name:"InstallmentTable",setup(u){return(n,a)=>(l(),r("table",mt,[_t,t("tbody",null,[(l(),r(f,null,k([1,2,3,4,5,6],(y,m)=>t("tr",{key:m,class:"even:bg-gray-50 odd:bg-white"},[o(G,{installment:y},null,8,["installment"]),gt,o(G,{installment:y+6},null,8,["installment"])])),64))])]))}},ft={class:"w-full flex gap-5"},bt={class:"w-3/5"},wt={class:"w-full flex flex-wrap"},xt={class:"w-full"},ht={class:"block mb-2 text-sm font-medium text-gray-900"},kt=["onUpdate:modelValue","placeholder","disabled"],$t=["onUpdate:modelValue","disabled"],vt=["value"],At={class:"w-full flex justify-between items-center p-2 mt-4"},Ct={key:0,class:"bg-yellow-50 rounded-lg border-2 border-yellow-600 border-dashed py-10 px-3 mt-5"},Tt={class:"w-full flex flex-wrap"},Bt={class:"w-full"},St={class:"block mb-2 text-sm font-medium text-gray-900"},Vt=["onUpdate:modelValue","placeholder"],Ut=["onUpdate:modelValue"],jt=["value"],It={class:"w-full flex justify-between items-center p-2 mt-4"},Dt={class:"w-2/5"},Ot={class:"w-full flex flex-col gap-2"},Mt=["src"],Nt={class:"text-lg text-gray-500"},zt=["href"],Gt={class:"my-10"},qt=t("span",{class:"text-2xl font-bold text-[#111928]"},"Taksit Seçenekleri",-1),Et={class:"flex justify-between my-6"},Ft={class:"text-blue-600 font-bold flex gap-1 items-center"},Kt={class:"flex justify-between gap-6 w-full"},Pt={class:"w-full"},Lt={key:0,class:"w-full"},Qt={class:"mt-10"},Rt={class:"text-2xl font-bold text-[#111928]"},Jt={class:"w-full flex flex-wrap gap-5 mt-4"},Ht={class:"mt-5"},Wt={class:"text-2xl font-bold text-[#111928]"},Xt={class:"w-1/2 flex items-center flex-wrap break-words bg-gray-50 rounded-lg py-4 px-3 mt-4"},Yt={class:"flex gap-2 items-center"},Zt={class:"text-xs text-gray-900 font-medium"},te={__name:"App",setup(u){P(()=>{const c=jQuery("#toplevel_page_gurmepos"),_=jQuery(".toplevel_page_gurmepos");c.addClass("wp-has-current-submenu"),_.addClass("wp-has-current-submenu"),_.siblings("ul").children("li").eq(2).addClass("current")});const n=q(),{gatewayAccount:a}=U(n),y=H(),{isTestMode:m,paymentGateways:b}=U(y);a.value.gateway_property=b.value.find(c=>c.id===a.value.gateway_id);const v=async()=>{await n.deleteAccount(),h.fire({text:"Silme işlemi tamamlandı.",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"}).then(function(){window.location.href="/wp-admin/admin.php?page=gpos-payment-gateways"})};return(c,_)=>(l(),D(W,null,{default:p(()=>[t("div",ft,[t("div",bt,[t("div",wt,[(l(!0),r(f,null,k(e(a).gateway_property.fields,(s,A)=>(l(),r("div",{key:A,class:"w-1/2 p-2"},[t("div",xt,[t("label",ht,i(s.label),1),s.type==="text"?$((l(),r("input",{key:0,"onUpdate:modelValue":g=>e(a).gateway_settings[s.model]=g,type:"text",class:B(`!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3 ${e(m)?"placeholder:text-gray-300":"placeholder:text-gray-600"}`),placeholder:s.label,required:"",disabled:e(m)},null,10,kt)),[[j,e(a).gateway_settings[s.model]]]):w("",!0),s.type==="select"?$((l(),r("select",{key:1,"onUpdate:modelValue":g=>e(a).gateway_settings[s.model]=g,class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3",disabled:e(m)},[(l(!0),r(f,null,k(s.options,(g,C)=>(l(),r("option",{key:C,value:C},i(g),9,vt))),128))],8,$t)),[[O,e(a).gateway_settings[s.model]]]):w("",!0)])]))),128)),t("div",At,[t("div",null,[o(z,{class:B(`${e(m)?"!border-gray-100 !text-gray-200":"bg-white"}`),disabled:e(m),onClick:e(n).testConnection},{default:p(()=>[o(e(M),{class:"w-4 h-4 mr-2"}),d(" "+i(c.$t("connect_test")),1)]),_:1},8,["class","disabled","onClick"]),o(T,{class:B(`${e(m)?"!bg-gray-100":"!bg-blue-700"}`),disabled:e(m),onClick:e(n).updateAccountSettings},{default:p(()=>[o(e(S),{class:"w-4 h-4 mr-2"}),d(" "+i(c.$t("save_settings")),1)]),_:1},8,["class","disabled","onClick"])]),t("button",{class:"mt-6 text-xs text-red-600 flex gap-1 items-center font-medium",onClick:v},[o(e(L),{class:"w-3 h-3"}),d(i(c.$t("delete_gateway")),1)])])]),e(m)?(l(),r("div",Ct,[o(Z,{class:"!border-0"},{content:p(()=>[d(i(c.$t("test_mode_content")),1)]),default:p(()=>[d(i(c.$t("test_mode_title"))+" ",1)]),_:1}),t("div",Tt,[(l(!0),r(f,null,k(e(a).gateway_property.fields,(s,A)=>(l(),r("div",{key:A,class:"w-1/2 p-2"},[t("div",Bt,[t("label",St,i(s.label),1),s.type==="text"?$((l(),r("input",{key:0,"onUpdate:modelValue":g=>e(a).gateway_settings[`test_${s.model}`]=g,type:"text",class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3",placeholder:s.label,required:""},null,8,Vt)),[[j,e(a).gateway_settings[`test_${s.model}`]]]):w("",!0),s.type==="select"?$((l(),r("select",{key:1,"onUpdate:modelValue":g=>e(a).gateway_settings[`test_${s.model}`]=g,class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3"},[(l(!0),r(f,null,k(s.options,(g,C)=>(l(),r("option",{key:C,value:C},i(g),9,jt))),128))],8,Ut)),[[O,e(a).gateway_settings[`test_${s.model}`]]]):w("",!0)])]))),128))]),t("div",It,[t("div",null,[o(z,{onClick:e(n).testConnection},{default:p(()=>[o(e(M),{class:"w-4 h-4 mr-2"}),d(i(c.$t("connect_test")),1)]),_:1},8,["onClick"]),o(T,{onClick:e(n).updateAccountSettings},{default:p(()=>[o(e(S),{class:"w-4 h-4 mr-2"}),d(i(c.$t("save_settings")),1)]),_:1},8,["onClick"])])])])):w("",!0)]),t("div",Dt,[t("div",Ot,[t("img",{class:"w-1/4",src:e(a).gateway_property.logo},null,8,Mt),t("p",Nt,i(c.$t(`${e(a).gateway_id}.description`)),1),t("a",{href:e(a).gateway_property.merchant_panel,target:"_blank",class:"mt-2 text-blue-700 text-sm flex gap-1 items-center"},[d(i(c.$t("gateway_screen")),1),o(e(N),{class:"w-3 h-3 text-blue-700"})],8,zt)])])]),t("div",Gt,[qt,t("div",Et,[o(Y,{modelValue:e(a).is_installments_active,"onUpdate:modelValue":_[0]||(_[0]=s=>e(a).is_installments_active=s),value:"installment_status",onChange:_[1]||(_[1]=s=>e(n).updateInstallmentStatus())},{default:p(()=>[d(" Taksitli Satışı Aktif Et ")]),_:1},8,["modelValue"]),t("span",Ft,[d("Taksit Kuralları"),o(e(N),{class:"w-4 h-4 text-blue-700"})])]),t("div",Kt,[t("div",Pt,[o(yt),o(T,{onClick:_[2]||(_[2]=s=>e(n).updateInstallments())},{default:p(()=>[o(e(S),{class:"w-4 h-4 mr-2"}),d(" Ayarları Kaydet ")]),_:1})]),e(a).gateway_property.supports.includes("installment_api")?(l(),r("div",Lt,[o(tt,null,{content:p(()=>[d(" Paratika Sanal POS panelinden taksit ayarlarınızı yaparak otomatik olarak taksit oranlarınızı getirebilirsiniz. ")]),button:p(()=>[o(T,{onClick:_[3]||(_[3]=s=>e(n).getInstallments())},{default:p(()=>[d(" Taksit Oranlarını Getir ")]),_:1})]),default:p(()=>[d(" Otomatik Taksit Aktif POS")]),_:1})])):w("",!0)])]),t("div",Qt,[t("span",Rt,i(c.$t("supports_features")),1),t("div",Jt,[(l(!0),r(f,null,k(e(a).gateway_property.supports,(s,A)=>(l(),D(lt,{key:A},{default:p(()=>[d(i(c.$t(s)),1)]),_:2},1024))),128))])]),t("div",Ht,[t("span",Wt,i(c.$t("supports_currency")),1),t("div",Xt,[t("div",Yt,[o(e(Q),{class:"w-5 h-5 text-gray-900"}),t("span",Zt,i(e(a).gateway_property.currencies.join(", ")),1)])])])]),_:1}))}},ee=R({locale:"default",messages:window.gpos.strings}),I=J(te);I.use(X);I.use(ee);I.mount("#app");
