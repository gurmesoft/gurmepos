import{d as P,S as x,o as l,a as r,r as V,b as t,g as o,u as e,K,s as D,w as $,G as q,t as i,i as U,n as B,F as f,B as k,L as E,e as j,f as d,M as L,h as u,j as w,J as O,N as M,k as S,O as Q,P as R,D as J,l as H,m as W}from"../vendor/main.js";import{a as h,u as X,_ as Y,p as Z}from"../tailwind/main.js";import{_ as T}from"../PrimaryButton/main.js";import{_ as tt}from"../Switch/main.js";import{_ as et,a as st,b as at}from"../Info/main.js";const F=P("GatewayAccount",{state:()=>({gatewayAccount:window.gpos.gateway_account||{}}),actions:{async updateAccountSettings(){await h.post("update_account_settings",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings}),x.fire({text:"Ayarlar kayıt edildi.",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async updateInstallments(){await h.post("update_installments",{id:this.gatewayAccount.id,installments:this.gatewayAccount.installments}),x.fire({text:"Ayarlar kayıt edildi.",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async getInstallments(){const m=await h.post("get_installments_from_api",{id:this.gatewayAccount.id});m.result==="success"?(this.gatewayAccount.installments=m.installments,x.fire({text:"Taksitler Uygulandı",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})):x.fire({text:`Taksitler getirilirken hata: ${m.installments}`,icon:"error",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async updateInstallmentStatus(){await h.post("update_installment_status",{id:this.gatewayAccount.id,status:this.gatewayAccount.is_installments_active})},async testConnection(){const m=await h.post("check_connection",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings});x.fire({text:m.message,icon:m.result,confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"})},async deleteAccount(){return await h.post("remove_gateway_account",{id:this.gatewayAccount.id})}}}),nt=["href"],lt={key:1,type:"button",class:"!text-blue-700 border border-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},z={__name:"OutlineButton",props:["href"],setup(m){return(n,s)=>m.href?(l(),r("a",{key:0,href:m.href,class:"!text-blue-700 border border-blue-700 !focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},[V(n.$slots,"default")],8,nt)):(l(),r("button",lt,[V(n.$slots,"default")]))}},ot={class:"w-72 flex justify-between py-4 px-3 bg-gray-50 rounded-lg items-center"},rt={class:"text-base"},it={__name:"FeatureBadge",setup(m){return(n,s)=>(l(),r("div",ot,[t("span",rt,[V(n.$slots,"default")]),o(e(K),{class:"w-6 h-6 text-green-300"})]))}},ct={class:"px-2 py-3"},dt=["disabled"],ut={scope:"row",class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap"},mt={class:"px-6 py-3"},pt={class:"flex gap-1 items-center"},_t=["disabled"],gt=t("span",{class:"font-bold"},"%",-1),G={__name:"InstallmentTableRow",props:["installment"],setup(m){const n=m,s=F(),{gatewayAccount:y}=D(s);return(p,b)=>(l(),r(f,null,[t("th",ct,[$(t("input",{"onUpdate:modelValue":b[0]||(b[0]=v=>e(y).installments[n.installment].enabled=v),type:"checkbox",value:"",class:"!w-4 !h-4 !text-blue-600 !bg-gray-100 !border-gray-300 !rounded !focus:ring-blue-500 !focus:ring-2",disabled:n.installment===1},null,8,dt),[[q,e(y).installments[n.installment].enabled]])]),t("td",ut,i(n.installment)+" Taksit ",1),t("td",mt,[t("div",pt,[$(t("input",{"onUpdate:modelValue":b[1]||(b[1]=v=>e(y).installments[n.installment].rate=v),class:B(`!w-32 !bg-gray-50 !border !border-gray-300 !text-sm !rounded-xl focus:ring-blue-500 focus:border-blue-500 block !p-2  ${n.installment===1?"!text-gray-300":"!text-gray-900"}`),disabled:n.installment===1},null,10,_t),[[U,e(y).installments[n.installment].rate]]),gt])])],64))}},yt={class:"w-full text-sm text-left text-gray-500 max-w-min my-4 block"},wt=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-3 py-3"}),t("th",{scope:"col",class:"px-6 py-3"}," Taksit "),t("th",{scope:"col",class:"px-6 py-3"}," Oran "),t("th",{class:"px-12"}),t("th",{scope:"col",class:"px-3 py-3"}),t("th",{scope:"col",class:"px-6 py-3"}," Taksit "),t("th",{scope:"col",class:"px-6 py-3"}," Oran ")])],-1),ft=t("td",{class:"px-12"},null,-1),bt={__name:"InstallmentTable",setup(m){return(n,s)=>(l(),r("table",yt,[wt,t("tbody",null,[(l(),r(f,null,k([1,2,3,4,5,6],(y,p)=>t("tr",{key:p,class:"even:bg-gray-50 odd:bg-white"},[o(G,{installment:y},null,8,["installment"]),ft,o(G,{installment:y+6},null,8,["installment"])])),64))])]))}},ht=t("span",{class:"text-blue-600 text-md"},"Geri Dön",-1),xt={class:"w-full flex gap-5 bg-white p-6 rounded-lg shadow-md"},kt={class:"w-3/5"},$t={class:"w-full flex flex-wrap"},vt={class:"w-full"},At={class:"flex gap-1 items-center mb-2"},Ct={class:"block text-sm font-medium text-gray-900"},Tt={key:0},Bt=["onUpdate:modelValue","placeholder","disabled"],St=["onUpdate:modelValue","disabled"],Vt=["value"],Dt={class:"w-full flex justify-between items-center p-2 mt-4"},Ut={key:0,class:"bg-yellow-50 rounded-lg border-2 border-yellow-600 border-dashed py-10 px-3 mt-5"},It={class:"w-full flex flex-wrap"},jt={class:"w-full"},Ot={class:"block mb-2 text-sm font-medium text-gray-900"},Mt=["onUpdate:modelValue","placeholder"],zt=["onUpdate:modelValue"],Gt=["value"],Ft={class:"w-full flex justify-between items-center p-2 mt-4"},Nt={class:"w-2/5"},Pt={class:"w-full flex flex-col gap-2"},Kt=["src"],qt={class:"text-lg text-gray-500"},Et=["href"],Lt={class:"my-10 bg-white p-6 rounded-lg shadow-md"},Qt=t("span",{class:"text-2xl font-bold text-[#111928]"},"Taksit Seçenekleri",-1),Rt={class:"flex justify-between my-6"},Jt={class:"flex justify-between gap-6 w-full"},Ht={class:"w-full"},Wt={key:0,class:"w-full"},Xt={class:"mt-10 bg-white p-6 rounded-lg shadow-md"},Yt={class:"text-2xl font-bold text-[#111928]"},Zt={class:"w-full flex flex-wrap gap-5 mt-4"},te={class:"mt-5 bg-white p-6 rounded-lg shadow-md"},ee={class:"text-2xl font-bold text-[#111928]"},se={class:"w-1/2 flex items-center flex-wrap break-words bg-gray-50 rounded-lg py-4 px-3 mt-4"},ae={class:"flex gap-2 items-center"},ne={class:"text-xs text-gray-900 font-medium"},le={__name:"App",setup(m){E(()=>{const c=jQuery("#toplevel_page_gurmepos"),_=jQuery(".toplevel_page_gurmepos");c.addClass("wp-has-current-submenu"),_.addClass("wp-has-current-submenu"),_.siblings("ul").children("li").eq(2).addClass("current")});const n=F(),{gatewayAccount:s}=D(n),y=X(),{isTestMode:p,paymentGateways:b}=D(y);s.value.gateway_property=b.value.find(c=>c.id===s.value.gateway_id);const v=async()=>{await n.deleteAccount(),x.fire({text:"Silme işlemi tamamlandı.",icon:"success",confirmButtonText:"Tamam",confirmButtonColor:"#1A56DB"}).then(function(){window.location.href="/wp-admin/admin.php?page=gpos-payment-gateways"})},N=()=>{window.history.back()};return(c,_)=>(l(),j(Y,{text:e(s).gateway_property.title,href:`https://yardim.gurmehub.com/docs/pos-entegrator/odeme-yontemleri/${e(s).gateway_property.id}-sanal-pos-ayarlar/`},{default:d(()=>[t("span",{class:"w-max flex gap-1 items-center my-4 cursor-pointer",onClick:N},[o(e(L),{class:"text-blue-600 w-6 h-6"}),ht]),t("div",xt,[t("div",kt,[t("div",$t,[(l(!0),r(f,null,k(e(s).gateway_property.fields,(a,A)=>(l(),r("div",{key:A,class:"w-1/2 p-2"},[t("div",vt,[t("div",At,[t("label",Ct,i(a.label),1),e(s).gateway_id==="paratika"&&a.label==="Kurum/Firma ID"?(l(),r("div",Tt,[t("span",null,[o(et,null,{default:d(()=>[u("Kurum/Firma ID bilgisine Paratika panelinizin üst menüsünden Bilgilerim > Temel Ayarlar kısmından ulaşabilirsiniz ")]),_:1})])])):w("",!0)]),a.type==="text"?$((l(),r("input",{key:0,"onUpdate:modelValue":g=>e(s).gateway_settings[a.model]=g,type:"text",class:B(`!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3 ${e(p)?"placeholder:text-gray-300":"placeholder:text-gray-600"}`),placeholder:a.label,required:"",disabled:e(p)},null,10,Bt)),[[U,e(s).gateway_settings[a.model]]]):w("",!0),a.type==="select"?$((l(),r("select",{key:1,"onUpdate:modelValue":g=>e(s).gateway_settings[a.model]=g,class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3",disabled:e(p)},[(l(!0),r(f,null,k(a.options,(g,C)=>(l(),r("option",{key:C,value:C},i(g),9,Vt))),128))],8,St)),[[O,e(s).gateway_settings[a.model]]]):w("",!0)])]))),128)),t("div",Dt,[t("div",null,[o(z,{class:B(`${e(p)?"!border-gray-100 !text-gray-200":"bg-white"}`),disabled:e(p),onClick:e(n).testConnection},{default:d(()=>[o(e(M),{class:"w-4 h-4 mr-2"}),u(" "+i(c.$t("connect_test")),1)]),_:1},8,["class","disabled","onClick"]),o(T,{class:B(`${e(p)?"!bg-gray-100":"!bg-blue-700"}`),disabled:e(p),onClick:e(n).updateAccountSettings},{default:d(()=>[o(e(S),{class:"w-4 h-4 mr-2"}),u(" "+i(c.$t("save_settings")),1)]),_:1},8,["class","disabled","onClick"])]),t("button",{class:"mt-6 text-xs text-red-600 flex gap-1 items-center font-medium",onClick:v},[o(e(Q),{class:"w-3 h-3"}),u(i(c.$t("delete_gateway")),1)])])]),e(p)?(l(),r("div",Ut,[o(st,{class:"!border-0"},{content:d(()=>[u(i(c.$t("test_mode_content")),1)]),default:d(()=>[u(i(c.$t("test_mode_title"))+" ",1)]),_:1}),t("div",It,[(l(!0),r(f,null,k(e(s).gateway_property.fields,(a,A)=>(l(),r("div",{key:A,class:"w-1/2 p-2"},[t("div",jt,[t("label",Ot,i(a.label),1),a.type==="text"?$((l(),r("input",{key:0,"onUpdate:modelValue":g=>e(s).gateway_settings[`test_${a.model}`]=g,type:"text",class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3",placeholder:a.label,required:""},null,8,Mt)),[[U,e(s).gateway_settings[`test_${a.model}`]]]):w("",!0),a.type==="select"?$((l(),r("select",{key:1,"onUpdate:modelValue":g=>e(s).gateway_settings[`test_${a.model}`]=g,class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3"},[(l(!0),r(f,null,k(a.options,(g,C)=>(l(),r("option",{key:C,value:C},i(g),9,Gt))),128))],8,zt)),[[O,e(s).gateway_settings[`test_${a.model}`]]]):w("",!0)])]))),128))]),t("div",Ft,[t("div",null,[o(z,{onClick:e(n).testConnection},{default:d(()=>[o(e(M),{class:"w-4 h-4 mr-2"}),u(i(c.$t("connect_test")),1)]),_:1},8,["onClick"]),o(T,{onClick:e(n).updateAccountSettings},{default:d(()=>[o(e(S),{class:"w-4 h-4 mr-2"}),u(i(c.$t("save_settings")),1)]),_:1},8,["onClick"])])])])):w("",!0)]),t("div",Nt,[t("div",Pt,[t("img",{class:"w-1/4",src:e(s).gateway_property.logo},null,8,Kt),t("p",qt,i(c.$t(`${e(s).gateway_id}.description`)),1),t("a",{href:e(s).gateway_property.merchant_panel,target:"_blank",class:"mt-2 text-blue-700 text-sm flex gap-1 items-center"},[u(i(c.$t("gateway_screen")),1),o(e(R),{class:"w-3 h-3 text-blue-700"})],8,Et)])])]),t("div",Lt,[Qt,t("div",Rt,[o(tt,{modelValue:e(s).is_installments_active,"onUpdate:modelValue":_[0]||(_[0]=a=>e(s).is_installments_active=a),value:"installment_status",onChange:_[1]||(_[1]=a=>e(n).updateInstallmentStatus())},{default:d(()=>[u(" Taksitli Satışı Aktif Et ")]),_:1},8,["modelValue"])]),t("div",Jt,[t("div",Ht,[o(bt),o(T,{onClick:_[2]||(_[2]=a=>e(n).updateInstallments())},{default:d(()=>[o(e(S),{class:"w-4 h-4 mr-2"}),u(" Ayarları Kaydet ")]),_:1})]),e(s).gateway_property.supports.includes("installment_api")?(l(),r("div",Wt,[o(at,null,{content:d(()=>[u(i(e(s).gateway_property.title)+" sanal POS panelinden taksit ayarlarınızı yaparak otomatik olarak taksit oranlarınızı getirebilirsiniz. ",1)]),button:d(()=>[o(T,{onClick:_[3]||(_[3]=a=>e(n).getInstallments())},{default:d(()=>[u(" Taksit Oranlarını Getir ")]),_:1})]),default:d(()=>[u(" Otomatik Taksit Aktif POS")]),_:1})])):w("",!0)])]),t("div",Xt,[t("span",Yt,i(c.$t("supports_features")),1),t("div",Zt,[(l(!0),r(f,null,k(e(s).gateway_property.supports,(a,A)=>(l(),j(it,{key:A},{default:d(()=>[u(i(c.$t(a)),1)]),_:2},1024))),128))])]),t("div",te,[t("span",ee,i(c.$t("supports_currency")),1),t("div",se,[t("div",ae,[o(e(J),{class:"w-5 h-5 text-gray-900"}),t("span",ne,i(e(s).gateway_property.currencies.join(", ")),1)])])])]),_:1},8,["text","href"]))}},oe=H({locale:"default",messages:window.gpos.strings}),I=W(le);I.use(Z);I.use(oe);I.mount("#app");
