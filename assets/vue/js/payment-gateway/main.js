import{i as z,S as b,o,c as i,r as T,a as t,g as r,u as e,O as K,s as U,w as $,M as O,t as a,m as I,n as V,F as f,l as x,N as P,P as E,d as D,e as d,Q as L,f as u,z as w,k as M,R as N,h as S,T as H,U as J,K as W,B as X,C as Y}from"../vendor/main.js";import{a as h,u as Z,_ as tt,p as et}from"../tailwind/main.js";import{_ as B}from"../PrimaryButton/main.js";import{_ as st}from"../Switch/main.js";import{_ as at,a as nt,b as ot}from"../Info/main.js";const G=z("GatewayAccount",{state:()=>({gatewayAccount:window.gpos.gateway_account||{}}),actions:{async updateAccountSettings(){await h.post("update_account_settings",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings}),b.fire({text:window.gpos.alert_texts.setting_saved,icon:"success",confirmButtonText:window.gpos.alert_texts.ok,confirmButtonColor:"#1A56DB"})},async updateInstallments(){await h.post("update_installments",{id:this.gatewayAccount.id,installments:this.gatewayAccount.installments}),b.fire({text:window.gpos.alert_texts.setting_saved,icon:"success",confirmButtonText:window.gpos.alert_texts.ok,confirmButtonColor:"#1A56DB"})},async getInstallments(){const _=await h.post("get_installments_from_api",{id:this.gatewayAccount.id});_.result==="success"?(this.gatewayAccount.installments=_.installments,b.fire({text:window.gpos.alert_texts.installments_applied,icon:"success",confirmButtonText:window.gpos.alert_texts.ok,confirmButtonColor:"#1A56DB"})):b.fire({text:`${window.gpos.alert_texts.installments_get_error} : ${_.installments}`,icon:"error",confirmButtonText:window.gpos.alert_texts.ok,confirmButtonColor:"#1A56DB"})},async updateInstallmentStatus(){await h.post("update_installment_status",{id:this.gatewayAccount.id,status:this.gatewayAccount.is_installments_active})},async testConnection(){const _=await h.post("check_connection",{id:this.gatewayAccount.id,settings:this.gatewayAccount.gateway_settings});b.fire({text:_.message,icon:_.result,confirmButtonText:window.gpos.alert_texts.ok,confirmButtonColor:"#1A56DB"})},async deleteAccount(){return await h.post("remove_gateway_account",{id:this.gatewayAccount.id})}}}),lt=["href"],rt={key:1,type:"button",class:"!text-blue-700 border border-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},F={__name:"OutlineButton",props:["href"],setup(_){return(c,p)=>_.href?(o(),i("a",{key:0,href:_.href,class:"!text-blue-700 border border-blue-700 !focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center mr-2"},[T(c.$slots,"default")],8,lt)):(o(),i("button",rt,[T(c.$slots,"default")]))}},it={class:"w-72 flex justify-between py-4 px-3 bg-gray-50 rounded-lg items-center"},ct={class:"text-base"},dt={__name:"FeatureBadge",setup(_){return(c,p)=>(o(),i("div",it,[t("span",ct,[T(c.$slots,"default")]),r(e(K),{class:"w-6 h-6 text-green-300"})]))}},ut={class:"px-2 py-3"},_t=["disabled"],pt={scope:"row",class:"px-2 py-3 font-medium text-gray-900 whitespace-nowrap"},mt={class:"px-6 py-3"},gt={class:"flex gap-1 items-center"},yt=["disabled"],wt=t("span",{class:"font-bold"},"%",-1),q={__name:"InstallmentTableRow",props:["installment"],setup(_){const c=_,p=G(),{gatewayAccount:s}=U(p);return(v,m)=>(o(),i(f,null,[t("th",ut,[$(t("input",{"onUpdate:modelValue":m[0]||(m[0]=k=>e(s).installments[c.installment].enabled=k),type:"checkbox",value:"",class:"!w-4 !h-4 !text-blue-600 !bg-gray-100 !border-gray-300 !rounded !focus:ring-blue-500 !focus:ring-2",disabled:c.installment===1},null,8,_t),[[O,e(s).installments[c.installment].enabled]])]),t("td",pt,a(c.installment)+" "+a(v.$t("installment")),1),t("td",mt,[t("div",gt,[$(t("input",{"onUpdate:modelValue":m[1]||(m[1]=k=>e(s).installments[c.installment].rate=k),class:V(`!w-32 !bg-gray-50 !border !border-gray-300 !text-sm !rounded-xl focus:ring-blue-500 focus:border-blue-500 block !p-2  ${c.installment===1?"!text-gray-300":"!text-gray-900"}`),disabled:c.installment===1},null,10,yt),[[I,e(s).installments[c.installment].rate]]),wt])])],64))}},ft={class:"w-full text-sm text-left text-gray-500 max-w-min my-4 block"},ht={class:"text-xs text-gray-700 uppercase bg-gray-50"},bt=t("th",{scope:"col",class:"px-3 py-3"},null,-1),xt={scope:"col",class:"px-6 py-3"},$t={scope:"col",class:"px-6 py-3"},vt=t("th",{class:"px-12"},null,-1),kt=t("th",{scope:"col",class:"px-3 py-3"},null,-1),At={scope:"col",class:"px-6 py-3"},Ct={scope:"col",class:"px-6 py-3"},Bt=t("td",{class:"px-12"},null,-1),Vt={__name:"InstallmentTable",setup(_){return(c,p)=>(o(),i("table",ft,[t("thead",ht,[t("tr",null,[bt,t("th",xt,a(c.$t("installment")),1),t("th",$t,a(c.$t("rate")),1),vt,kt,t("th",At,a(c.$t("installment")),1),t("th",Ct,a(c.$t("rate")),1)])]),t("tbody",null,[(o(),i(f,null,x([1,2,3,4,5,6],(s,v)=>t("tr",{key:v,class:"even:bg-gray-50 odd:bg-white"},[r(q,{installment:s},null,8,["installment"]),Bt,r(q,{installment:s+6},null,8,["installment"])])),64))])]))}},St={class:"text-blue-600 text-md"},Tt={class:"w-full flex gap-5 bg-white p-6 rounded-lg shadow-md"},Ut={class:"w-3/5"},It={class:"w-full flex flex-wrap"},jt={class:"w-full"},Dt={class:"flex gap-1 items-center mb-2"},Mt={class:"block text-sm font-medium text-gray-900"},Nt={key:0},Ft=["onUpdate:modelValue","placeholder","disabled"],qt=["onUpdate:modelValue","disabled"],Gt=["value"],Qt={class:"w-full flex justify-between items-center p-2 mt-4"},Rt={key:0,class:"bg-yellow-50 rounded-lg border-2 border-yellow-600 border-dashed py-10 px-3 mt-5"},zt={class:"w-full flex flex-wrap"},Kt={class:"w-full"},Ot={class:"block mb-2 text-sm font-medium text-gray-900"},Pt=["onUpdate:modelValue","placeholder"],Et=["onUpdate:modelValue"],Lt=["value"],Ht={class:"w-full flex justify-between items-center p-2 mt-4"},Jt={class:"w-2/5"},Wt={class:"w-full flex flex-col gap-2"},Xt=["src"],Yt={class:"text-lg text-gray-500"},Zt=["href"],te={key:0,class:"my-10 bg-white p-6 rounded-lg shadow-md"},ee={class:"text-2xl font-bold text-[#111928]"},se={class:"flex justify-between my-6"},ae={class:"flex justify-between gap-6 w-full"},ne={class:"w-full"},oe={key:0,class:"w-full"},le={class:"mt-10 bg-white p-6 rounded-lg shadow-md"},re={class:"text-2xl font-bold text-[#111928]"},ie={class:"w-full flex flex-wrap gap-5 mt-4"},ce={class:"mt-5 bg-white p-6 rounded-lg shadow-md"},de={class:"text-2xl font-bold text-[#111928]"},ue={class:"w-1/2 flex items-center flex-wrap break-words bg-gray-50 rounded-lg py-4 px-3 mt-4"},_e={class:"flex gap-2 items-center"},pe={class:"text-xs text-gray-900 font-medium"},me={__name:"App",setup(_){const{t:c}=P();E(()=>{const l=jQuery("#toplevel_page_gurmepos"),g=jQuery(".toplevel_page_gurmepos");l.addClass("wp-has-current-submenu"),g.addClass("wp-has-current-submenu"),g.siblings("ul").children("li").eq(3).addClass("current")});const p=G(),{gatewayAccount:s}=U(p),v=Z(),{isTestMode:m,paymentGateways:k}=U(v);s.value.gateway_property=k.value.find(l=>l.id===s.value.gateway_id);const Q=async()=>{await p.deleteAccount(),b.fire({text:c("deletion_completed"),icon:"success",confirmButtonText:c("ok"),confirmButtonColor:"#1A56DB"}).then(function(){window.location.href="/wp-admin/admin.php?page=gpos-payment-gateways"})},R=()=>{window.history.back()};return(l,g)=>(o(),D(tt,{text:e(s).gateway_property.title,href:`https://yardim.gurmehub.com/docs/pos-entegrator/odeme-yontemleri/${e(s).gateway_property.id}-sanal-pos-ayarlar/`},{default:d(()=>[t("span",{class:"w-max flex gap-1 items-center my-4 cursor-pointer",onClick:R},[r(e(L),{class:"text-blue-600 w-6 h-6"}),t("span",St,a(l.$t("back_to")),1)]),t("div",Tt,[t("div",Ut,[t("div",It,[(o(!0),i(f,null,x(e(s).gateway_property.fields,(n,A)=>(o(),i("div",{key:A,class:"w-1/2 p-2"},[t("div",jt,[t("div",Dt,[t("label",Mt,a(n.label),1),e(s).gateway_id==="paratika"&&n.label==="Kurum/Firma ID"?(o(),i("div",Nt,[t("span",null,[r(at,null,{default:d(()=>[u(a(l.$t("paratika_information")),1)]),_:1})])])):w("",!0)]),n.type==="text"?$((o(),i("input",{key:0,"onUpdate:modelValue":y=>e(s).gateway_settings[n.model]=y,type:"text",class:V(`!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3 ${e(m)?"placeholder:text-gray-300":"placeholder:text-gray-600"}`),placeholder:n.label,required:"",disabled:e(m)},null,10,Ft)),[[I,e(s).gateway_settings[n.model]]]):w("",!0),n.type==="select"?$((o(),i("select",{key:1,"onUpdate:modelValue":y=>e(s).gateway_settings[n.model]=y,class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3",disabled:e(m)},[(o(!0),i(f,null,x(n.options,(y,C)=>(o(),i("option",{key:C,value:C},a(y),9,Gt))),128))],8,qt)),[[M,e(s).gateway_settings[n.model]]]):w("",!0)])]))),128)),t("div",Qt,[t("div",null,[r(F,{class:V(`${e(m)?"!border-gray-100 !text-gray-200":"bg-white"}`),disabled:e(m),onClick:e(p).testConnection},{default:d(()=>[r(e(N),{class:"w-4 h-4 mr-2"}),u(" "+a(l.$t("connect_test")),1)]),_:1},8,["class","disabled","onClick"]),r(B,{class:V(`${e(m)?"!bg-gray-100":"!bg-blue-700"}`),disabled:e(m),onClick:e(p).updateAccountSettings},{default:d(()=>[r(e(S),{class:"w-4 h-4 mr-2"}),u(" "+a(l.$t("save_settings")),1)]),_:1},8,["class","disabled","onClick"])]),t("button",{class:"mt-6 text-xs text-red-600 flex gap-1 items-center font-medium",onClick:Q},[r(e(H),{class:"w-3 h-3"}),u(a(l.$t("delete_gateway")),1)])])]),e(m)?(o(),i("div",Rt,[r(nt,{class:"!border-0"},{content:d(()=>[u(a(l.$t("test_mode_content")),1)]),default:d(()=>[u(a(l.$t("test_mode_title"))+" ",1)]),_:1}),t("div",zt,[(o(!0),i(f,null,x(e(s).gateway_property.fields,(n,A)=>(o(),i("div",{key:A,class:"w-1/2 p-2"},[t("div",Kt,[t("label",Ot,a(n.label),1),n.type==="text"?$((o(),i("input",{key:0,"onUpdate:modelValue":y=>e(s).gateway_settings[`test_${n.model}`]=y,type:"text",class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3",placeholder:n.label,required:""},null,8,Pt)),[[I,e(s).gateway_settings[`test_${n.model}`]]]):w("",!0),n.type==="select"?$((o(),i("select",{key:1,"onUpdate:modelValue":y=>e(s).gateway_settings[`test_${n.model}`]=y,class:"!bg-gray-50 !border !border-gray-300 !text-gray-900 !text-sm !rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full !p-3"},[(o(!0),i(f,null,x(n.options,(y,C)=>(o(),i("option",{key:C,value:C},a(y),9,Lt))),128))],8,Et)),[[M,e(s).gateway_settings[`test_${n.model}`]]]):w("",!0)])]))),128))]),t("div",Ht,[t("div",null,[r(F,{onClick:e(p).testConnection},{default:d(()=>[r(e(N),{class:"w-4 h-4 mr-2"}),u(a(l.$t("connect_test")),1)]),_:1},8,["onClick"]),r(B,{onClick:e(p).updateAccountSettings},{default:d(()=>[r(e(S),{class:"w-4 h-4 mr-2"}),u(a(l.$t("save_settings")),1)]),_:1},8,["onClick"])])])])):w("",!0)]),t("div",Jt,[t("div",Wt,[t("img",{class:"w-1/4",src:e(s).gateway_property.logo},null,8,Xt),t("p",Yt,a(l.$t(`${e(s).gateway_id}.description`)),1),t("a",{href:e(s).gateway_property.merchant_panel,target:"_blank",class:"mt-2 text-blue-700 text-sm flex gap-1 items-center"},[u(a(l.$t("gateway_screen")),1),r(e(J),{class:"w-3 h-3 text-blue-700"})],8,Zt)])])]),e(s).gateway_property.is_common_form===!1?(o(),i("div",te,[t("span",ee,a(l.$t("installment_options")),1),t("div",se,[r(st,{modelValue:e(s).is_installments_active,"onUpdate:modelValue":g[0]||(g[0]=n=>e(s).is_installments_active=n),value:"installment_status",onChange:g[1]||(g[1]=n=>e(p).updateInstallmentStatus())},{default:d(()=>[u(a(l.$t("activate_installment")),1)]),_:1},8,["modelValue"])]),t("div",ae,[t("div",ne,[r(Vt),r(B,{onClick:g[2]||(g[2]=n=>e(p).updateInstallments())},{default:d(()=>[r(e(S),{class:"w-4 h-4 mr-2"}),u(" "+a(l.$t("save_settings")),1)]),_:1})]),e(s).gateway_property.supports.includes("installment_api")?(o(),i("div",oe,[r(ot,null,{content:d(()=>[u(a(e(s).gateway_property.title)+" "+a(l.$t("virtual_pos_installment_settings")),1)]),button:d(()=>[r(B,{onClick:g[3]||(g[3]=n=>e(p).getInstallments())},{default:d(()=>[u(a(l.$t("get_installment_rates")),1)]),_:1})]),default:d(()=>[u(a(l.$t("automatic_installment_active_pos")),1)]),_:1})])):w("",!0)])])):w("",!0),t("div",le,[t("span",re,a(l.$t("supports_features")),1),t("div",ie,[(o(!0),i(f,null,x(e(s).gateway_property.supports,(n,A)=>(o(),D(dt,{key:A},{default:d(()=>[u(a(l.$t(n)),1)]),_:2},1024))),128))])]),t("div",ce,[t("span",de,a(l.$t("supports_currency")),1),t("div",ue,[t("div",_e,[r(e(W),{class:"w-5 h-5 text-gray-900"}),t("span",pe,a(e(s).gateway_property.currencies.join(", ")),1)])])])]),_:1},8,["text","href"]))}},ge=X({locale:"default",messages:window.gpos.strings,legacy:!1}),j=Y(me);j.use(et);j.use(ge);j.mount("#app");
